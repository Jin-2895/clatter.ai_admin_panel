import{h as R,j as e,d as t,M as Ne,O as b,P as x,Q as y,S as L,U as ge,V as k,W as B,X as G,Y as K,Z as U,$ as M,a0 as Q,r as u,i as D,a1 as F,C as O,e as ee,a2 as ve,l as ae,R as V,m as P,s as E}from"./index.c8bb1a37.js";import{S as xe,A as Se}from"./index.a8353bec.js";import{u as Ce,C as w}from"./index.esm.e975715f.js";import{S as $}from"./react-select.esm.69af930a.js";import{Q as ye,C as we,R as Pe}from"./react-dataTable-component.65fa3c69.js";import{m as Y}from"./moment.45f3d69c.js";import{M as Ae,F as se,u as Fe,h as je}from"./useQueryParams.f267746c.js";import{s as ze,S as Te}from"./startCsvDownload.a895920d.js";import{S as ke,a as J,A as Ee}from"./ActiveUser.7ac1c549.js";/* empty css                  */const _={email:"",firstName:"",lastName:"",userName:"",password:"",phoneNumber:""},$e=(a,n,h)=>{for(const l in a)if(typeof a[l]=="object"){if(a[l]===null)return!1}else if(typeof a[l]=="string"&&(a[l].length===0||l==="password"&&(!n.test(a[l])||a[l].length<8)||l==="phoneNumber"&&(a[l].length<10||a[l].length>16)||l==="email"&&!h.test(a[l])))return!1;return!0},Le=({open:a,toggleSidebar:n})=>{const h=R(),{control:l,setValue:S,setError:o,handleSubmit:m,formState:{errors:i}}=Ce({defaultValues:_});return e(xe,{size:"lg",open:a,title:"New User",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:n,onClosed:()=>{for(const r in _)S(r,"")},children:t(Ne,{onSubmit:m(r=>{const j=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/,A=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if($e(r,j,A))h(ge(r));else for(const c in r)r[c]===null&&o(c,{type:`${c} is required`}),r[c]!==null&&r[c].length===0&&o(c,{type:`${c} is required`}),c==="password"&&!j.test(r[c])&&o(c,{type:"Password must contain letters, numbers & periods"}),c==="password"&&r[c].length<8&&o(c,{type:"Password should be 8 characters or more"}),c==="phoneNumber"&&(r[c].length<10||r[c].length>16)&&o(c,{type:"Please check your contact number"}),c==="email"&&!A.test(r[c])&&o(c,{type:"Email doesn't not qualify standard"})}),children:[t("div",{className:"mb-1",children:[t(b,{className:"form-label",for:"userName",children:["Username ",e("span",{className:"text-danger",children:"*"})]}),e(w,{name:"userName",control:l,render:({field:r})=>e(x,{id:"userName",placeholder:"johnDoe99",invalid:i.userName&&!0,...r})}),i.userName&&e(y,{color:"danger",children:i.userName.type})]}),t("div",{className:"mb-1",children:[t(b,{className:"form-label",for:"firstName",children:["First Name ",e("span",{className:"text-danger",children:"*"})]}),e(w,{name:"firstName",control:l,render:({field:r})=>e(x,{id:"firstName",placeholder:"John",invalid:i.firstName&&!0,...r})}),i.firstName&&e(y,{color:"danger",children:i.firstName.type})]}),t("div",{className:"mb-1",children:[t(b,{className:"form-label",for:"lastName",children:["Last Name ",e("span",{className:"text-danger",children:"*"})]}),e(w,{name:"lastName",control:l,render:({field:r})=>e(x,{id:"lastName",placeholder:"Doe",invalid:i.lastName&&!0,...r})}),i.lastName&&e(y,{color:"danger",children:i.lastName.type})]}),t("div",{className:"mb-1",children:[t(b,{className:"form-label",for:"email",children:["Email ",e("span",{className:"text-danger",children:"*"})]}),e(w,{name:"email",control:l,render:({field:r})=>e(x,{type:"email",id:"userEmail",placeholder:"john.doe@example.com",invalid:i.email&&!0,...r})}),i.email&&e(y,{color:"danger",children:i.email.type})]}),t("div",{className:"mb-1",children:[t(b,{className:"form-label",for:"password",children:["Password ",e("span",{className:"text-danger",children:"*"})]}),e(w,{name:"password",control:l,render:({field:r})=>e(x,{type:"password",id:"password",placeholder:"********",invalid:i.password&&!0,...r})}),i.password?e(y,{color:"danger",children:i.password.type}):e(y,{color:"muted",children:"You can use letters, numbers & periods"})]}),t("div",{className:"mb-1",children:[t(b,{className:"form-label",for:"phoneNumber",children:["Contact ",e("span",{className:"text-danger",children:"*"})]}),e(w,{name:"phoneNumber",control:l,render:({field:r})=>e(x,{id:"phoneNumber",placeholder:"(397) 294-5153",invalid:i.phoneNumber&&!0,...r})}),i.phoneNumber&&e(y,{color:"danger",children:i.phoneNumber.type})]}),e(L,{type:"submit",className:"me-1",color:"primary",children:"ADD"}),e(L,{type:"reset",color:"secondary",outline:!0,onClick:n,children:"Cancel"})]})})},Me=a=>{var n;if((n=a==null?void 0:a.avatar)!=null&&n.length)return e(Q,{className:"me-1",img:a.avatar,width:"32",height:"32"});{let h=a.firstName+" "+a.lastName;return e(Q,{initials:!0,className:"me-1",color:a.avatarColor||"light-primary",content:h||"John Doe"})}},X={active:"light-success",deactivated:"light-warning",inactive:"light-secondary",banned:"light-danger"},Oe=[{name:"User",sortable:!0,minWidth:"260px",sortField:"fullName",selector:a=>a.firstName+a.lastName,cell:a=>t("div",{className:"d-flex justify-content-left align-items-center",children:[Me(a),t("div",{className:"d-flex flex-column",children:[e(k,{to:`/user/view/${a.id}`,className:"user_name text-truncate text-body",children:t("span",{className:"fw-bolder text-capitalize",children:[a.firstName," ",a.lastName]})}),e("small",{className:"text-truncate text-muted mb-0",children:a.email})]})]})},{name:"Status",sortable:!0,minWidth:"100px",sortField:"userStatus",selector:a=>a.userStatus,cell:a=>e(B,{className:"text-capitalize d-flex flex-column",color:X[a.userStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.userStatus})})},{name:"Plan",minWidth:"135px",sortable:!0,sortField:"currentPlan",selector:a=>a.plan,cell:a=>e("span",{className:"text-capitalize",children:a.plan})},{name:"Subscription Status",minWidth:"140px",sortable:!0,sortField:"subscription",selector:a=>a.subscriptionStatus,cell:a=>e(B,{className:"text-capitalize d-flex flex-column",color:X[a.subscriptionStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.subscriptionStatus})})},{name:"Created At",minWidth:"100px",sortable:!0,sortField:"createdAt",selector:a=>a.createdAt,cell:a=>t("div",{className:"text-capitalize d-flex flex-column",children:[e("span",{children:Y(a.createdAt).format("MM/DD/YY")}),e("smal",{children:Y(a.createdAt).format("hh:mm A")})]})},{name:"Actions",minWidth:"100px",cell:a=>e("div",{className:"column-action",children:t(G,{children:[e(K,{tag:"div",className:"btn btn-sm",children:e(Ae,{size:14,className:"cursor-pointer"})}),t(U,{children:[t(M,{tag:k,className:"w-100",to:`/user/view/${a.id}`,children:[e(se,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Details"})]}),t(M,{tag:k,to:`/user/view/${a.id}&edit=true`,className:"w-100",children:[e(Se,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Edit"})]})]})]})})}],Re=({store:a,toggleSidebar:n,handlePerPage:h,rowsPerPage:l,handleFilter:S,handleDownloadCSV:o,searchTerm:m})=>e("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:t(V,{children:[e(P,{xl:"6",className:"d-flex align-items-center p-0",children:t("div",{className:"d-flex align-items-center w-100",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),t(x,{className:"mx-50",type:"select",id:"rows-per-page",value:l,onChange:h,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),t(P,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[t("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[e("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),e(x,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:m,onChange:i=>S(i.target.value)})]}),t("div",{className:"d-flex align-items-center table-header-actions",children:[t(G,{className:"me-1",children:[t(K,{color:"secondary",caret:!0,outline:!0,children:[e(Te,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"Export"})]}),e(U,{children:t(M,{className:"w-100",onClick:()=>o(),children:[e(se,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"CSV"})]})})]}),e(L,{className:"add-new-user",color:"primary",onClick:n,children:"Add New User"})]})]})]})}),Ve=({allUserData:a,total:n,url:h})=>{const l=R(),[S,o]=u.exports.useState("desc"),[m,i]=u.exports.useState(""),[f,z]=u.exports.useState(1),[r,j]=u.exports.useState("id"),[A,c]=u.exports.useState(!1),[N,te]=u.exports.useState(10),[g,W]=u.exports.useState({value:"",label:"All"}),[v,q]=u.exports.useState({value:"",label:"All"}),[C,I]=u.exports.useState({value:"",label:"All",number:0}),{newUserData:H}=D(s=>s.user),T=()=>c(!A),le=()=>{let s={page:f,plan:v.value,status:C.value,subStatus:g.value,keyword:m,limit:N,flag:"getCSV"},d={};Object.keys(s).forEach(p=>{s[p]!==void 0&&s[p]!==null&&(d[p]=s[p])}),l(F(d))};u.exports.useEffect(()=>{if(h!=null){debugger;ze(h)}},[h]),u.exports.useEffect(()=>{const d={...{page:f,plan:v.value,status:C.value,subStatus:g.value,keyword:m,limit:N}};Fe(d);const p=je(d);return window.addEventListener("popstate",p),()=>{window.removeEventListener("popstate",p)}},[f,v,g,m,N]),u.exports.useEffect(()=>{let s,d={page:f,plan:v.value,status:C.value,subStatus:g.value,keyword:m,limit:N};return m?s=setTimeout(()=>{l(F(d))},1e3):s=setTimeout(()=>{l(F(d))},100),H&&(T(),s=setTimeout(()=>{l(F(d))},1e3)),()=>{clearTimeout(s)}},[l,f,v,g,N,m,C,H]),u.exports.useEffect(()=>{z(1)},[v,g,C]);const re=[{value:"",label:"All"},{value:"active",label:"Active"},{value:"cancel",label:"Cancel"},{value:"expired",label:"Expired"}],ne=[{value:"",label:"All"},{value:"Creator Monthly Plan",label:"Creator Monthly Plan"},{value:"Agency Monthly Plan",label:"Agency Monthly Plan"},{value:"Company Monthly Plan",label:"Company Monthly Plan"},{value:"Free Trial",label:"Free Trial"}],ie=[{value:"",label:"All",number:0},{value:"banned",label:"Banned",number:1},{value:"active",label:"Active",number:2},{value:"inactive",label:"Inactive",number:3},{value:"deactivated",label:"Deactivated",number:4}],ce=s=>{z(s.selected+1)},oe=s=>{const d=parseInt(s.currentTarget.value);te(d)},de=s=>{i(s)},me=()=>{const s=Number(Math.ceil(n/N));return e(Pe,{previousLabel:"",nextLabel:"",pageCount:s||1,activeClassName:"active",forcePage:f!==0?f-1:0,onPageChange:d=>ce(d),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},ue=()=>{const s={role:g.value,currentPlan:v.value,status:C.value,q:m},d=Object.keys(s).some(function(p){var Z;return((Z=s[p])==null?void 0:Z.length)>0});return(a==null?void 0:a.length)>0&&!d?a:(a==null?void 0:a.length)===0&&d?[]:a==null?void 0:a.slice(0,N)},he=(s,d)=>{o(d),j(s.sortField)},pe=s=>{!s||(s.value!==""&&s.label?W({label:s.label,value:s.value}):W({label:s.label,value:s.value}))},be=s=>{!s||(s.value!==""&&s.label?q({label:s.label,value:s.value}):q({label:s.label,value:s.value}))},fe=s=>{!s||(s.value!==""&&s.label?I({label:s.label,value:s.value}):I({label:s.label,value:s.value}))};return t(u.exports.Fragment,{children:[t(O,{children:[e(ee,{children:e(ve,{tag:"h4",children:"Filters"})}),e(ae,{children:t(V,{children:[t(P,{md:"4",children:[e(b,{for:"role-select",children:"Subscription Status"}),e($,{isClearable:!1,value:g||"",options:re,className:"react-select",classNamePrefix:"select",theme:E,onChange:pe})]}),t(P,{className:"my-md-0 my-1",md:"4",children:[e(b,{for:"plan-select",children:"Plan"}),e($,{theme:E,isClearable:!1,className:"react-select",classNamePrefix:"select",options:ne,value:v||"",onChange:be})]}),t(P,{md:"4",children:[e(b,{for:"status-select",children:"User Status"}),e($,{theme:E,isClearable:!1,className:"react-select",classNamePrefix:"select",options:ie,value:C||"",onChange:fe})]})]})})]}),e(O,{className:"overflow-hidden",children:e("div",{className:"react-dataTable",children:e(ye,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:Oe,onSort:he,sortIcon:e(we,{}),className:"react-dataTable",paginationComponent:me,data:ue(),subHeaderComponent:e(Re,{handleDownloadCSV:le,store:a,searchTerm:m,rowsPerPage:N,handleFilter:de,handlePerPage:oe,toggleSidebar:T})})})}),e(Le,{open:A,toggleSidebar:T})]})},Xe=()=>{var S;const a=R(),{allUserData:n,allUserDataLoading:h,allUserDataError:l}=D(o=>o.user);return u.exports.useEffect(()=>{a(F())},[]),t("div",{className:"app-user-list",children:[t(O,{children:[e(ee,{children:e("h4",{className:"card-title",children:"User Stats"})}),e(ae,{children:e(V,{children:(S=n==null?void 0:n.stats)==null?void 0:S.map(o=>{let m=null;return o.title==="Total Users"?m=e(J,{size:15}):o.title==="Active Users"?m=e(Ee,{size:15}):m=e(J,{size:15}),e(P,{lg:"4",sm:"6",children:e(ke,{className:"shadow-lg",statTitle:o==null?void 0:o.title,icon:m,renderStats:e("h3",{className:"fw-bolder mb-75",children:o==null?void 0:o.count})})})})})})]}),e(Ve,{allUserData:n==null?void 0:n.data,total:n==null?void 0:n.total,url:n==null?void 0:n.url})]})};export{Xe as default};
