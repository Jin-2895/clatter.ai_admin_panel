import{r as p,d as r,j as e,I as z,h as T,M as pe,O as k,P as w,Q as A,S as L,av as he,aw as fe,i as Ne,ax as B,ay as D,C as Q,e as be,a2 as ge,l as ve,R as G,m as V,s as xe,W as Ce,X as ye,Y as we,Z as Se,$ as R,a0 as U,az as Ae,aA as ke}from"./index.c8bb1a37.js";import{S as je,A as Te}from"./index.a8353bec.js";import{u as Fe,C as j}from"./index.esm.e975715f.js";import{S as ze}from"./react-select.esm.69af930a.js";import{Q as Be,C as De,R as Oe}from"./react-dataTable-component.65fa3c69.js";import{w as $e,S as Ee}from"./sweetalert2-react-content.es.c338323d.js";import{m as _}from"./moment.45f3d69c.js";import{u as Re,h as Le,M as Ve,F as We}from"./useQueryParams.f267746c.js";function Me(s,u){if(s==null)return{};var d=Pe(s,u),l,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(a=0;a<o.length;a++)l=o[a],!(u.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,l)||(d[l]=s[l]))}return d}function Pe(s,u){if(s==null)return{};var d={},l=Object.keys(s),a,o;for(o=0;o<l.length;o++)a=l[o],!(u.indexOf(a)>=0)&&(d[a]=s[a]);return d}var W=p.exports.forwardRef(function(s,u){var d=s.color,l=d===void 0?"currentColor":d,a=s.size,o=a===void 0?24:a,b=Me(s,["color","size"]);return r("svg",{ref:u,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...b,children:[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})});W.propTypes={color:z.exports.string,size:z.exports.oneOfType([z.exports.string,z.exports.number])};W.displayName="Trash2";const Ie=W,Z={userName:"",firstName:"",lastName:"",email:"",password:""},Ye=(s,u,d)=>{for(const l in s)if(typeof s[l]=="object"){if(s[l]===null)return!1}else if(typeof s[l]=="string"&&(s[l].length===0||l==="password"&&(!u.test(s[l])||s[l].length<8)||l==="email"&&!d.test(s[l])))return!1;return!0},He=({open:s,toggleSidebar:u,editAdminProfile:d,setEditAdminProfile:l,adminProfileData:a})=>{const o=T();p.exports.useEffect(()=>{a&&(g("firstName",a.firstName),g("lastName",a.lastName),g("userName",a.userName),g("email",a.email))},[a]);const{control:b,setValue:g,setError:h,handleSubmit:S,formState:{errors:m}}=Fe({defaultValues:Z});return e(je,{size:"lg",open:s,title:"New Admin",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:u,onClosed:()=>{l(!d);for(const i in Z)g(i,"")},children:r(pe,{onSubmit:S(i=>{const f=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/,F=/^[a-zA-Z0-9._-]+@clatter\.com$/;if(Ye(i,f,F)){debugger;const n=new FormData;if(n.append("firstName",i.firstName),n.append("lastName",i.lastName),n.append("email",i.email),n.append("userName",i.userName),n.append("password",i.password),a.id){let $=a.id;o(he({formData:n,id:$}))}else o(fe(i))}else for(const n in i)i[n]===null&&h(n,{type:"manual"}),i[n]!==null&&i[n].length===0&&h(n,{type:"manual"}),n==="password"&&!f.test(i[n])&&h(n,{type:"Password must contain letters, numbers & periods"}),n==="password"&&i[n].length<8&&h(n,{type:"Password should be 8 characters or more"}),n==="email"&&!F.test(i[n])&&h(n,{type:"manual"})}),children:[r("div",{className:"mb-1",children:[r(k,{className:"form-label",for:"userName",children:["User Name ",e("span",{className:"text-danger",children:"*"})]}),e(j,{name:"userName",control:b,render:({field:i})=>e(w,{defaultValue:d,id:"userName",placeholder:"john.doe",invalid:m.userName&&!0,...i})}),m.userName&&e(A,{color:"danger",children:m.userName.type})]}),r("div",{className:"mb-1",children:[r(k,{className:"form-label",for:"firstName",children:["First Name ",e("span",{className:"text-danger",children:"*"})]}),e(j,{name:"firstName",control:b,render:({field:i})=>e(w,{id:"firstName",defaultValue:a?a.firstName:"",placeholder:"john",invalid:m.firstName&&!0,...i})}),m.firstName&&e(A,{color:"danger",children:m.firstName.type})]}),r("div",{className:"mb-1",children:[r(k,{className:"form-label",for:"lastName",children:["Last Name ",e("span",{className:"text-danger",children:"*"})]}),e(j,{name:"lastName",control:b,render:({field:i})=>e(w,{id:"lastName",defaultValue:a?a.lastName:"",placeholder:"doe",invalid:m.lastName&&!0,...i})}),m.lastName&&e(A,{color:"danger",children:m.lastName.type})]}),r("div",{className:"mb-1",children:[r(k,{className:"form-label",for:"email",children:["Email ",e("span",{className:"text-danger",children:"*"})]}),e(j,{name:"email",control:b,render:({field:i})=>e(w,{disabled:!!(a!=null&&a.email),id:"email",defaultValue:a?a.email:"",placeholder:"john.doe@clatter.com",invalid:m.email&&!0,...i})}),m.email&&e(A,{color:"danger",children:m.email.type})]}),r("div",{className:"mb-1",children:[r(k,{className:"form-label",for:"password",children:["Password ",e("span",{className:"text-danger",children:"*"})]}),e(j,{name:"password",control:b,render:({field:i})=>e(w,{type:"password",id:"password",placeholder:"********",invalid:m.password&&!0,...i})}),m.password?e(A,{color:"danger",children:m.password.type}):e(A,{color:"muted",children:"You can use letters, numbers & periods"})]}),e(L,{type:"submit",className:"me-1",color:"primary",children:"Submit"}),e(L,{type:"button",color:"secondary",outline:!0,onClick:u,children:"Cancel"})]})})},y=$e(Ee),qe=s=>{var u;if((u=s==null?void 0:s.avatar)!=null&&u.length)return e(U,{className:"me-1",img:s.avatar,width:"32",height:"32"});{let d=s.firstName+" "+s.lastName;return e(U,{initials:!0,className:"me-1",color:s.avatarColor||"light-primary",content:d||"John Doe"})}},Qe={active:"light-success",deactivated:"light-warning",inactive:"light-secondary",banned:"light-danger"},Ue=({toggleSidebar:s,handlePerPage:u,rowsPerPage:d,handleFilter:l,searchTerm:a})=>e("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:r(G,{children:[e(V,{xl:"6",className:"d-flex align-items-center p-0",children:r("div",{className:"d-flex align-items-center w-100",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),r(w,{className:"mx-50",type:"select",id:"rows-per-page",value:d,onChange:u,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),r(V,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[r("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[e("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),e(w,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:a,onChange:o=>l(o.target.value)})]}),e(L,{className:"add-new-user",color:"primary",onClick:s,children:"Add New Admin"})]})]})}),_e=({toggleSidebar:s,editAdminProfile:u,setEditAdminProfile:d,userID:l,setUserID:a})=>{const o=T(),[b,g]=p.exports.useState("desc"),[h,S]=p.exports.useState(""),[m,O]=p.exports.useState(1),[J,i]=p.exports.useState("id"),[f,F]=p.exports.useState(10),[n,$]=p.exports.useState(null),[X,K]=p.exports.useState(null),[v,M]=p.exports.useState({value:"",label:"All",number:0}),{getAdminData:x,deleteAdminData:P,deactivateAdminData:I,updateAdminData:Y,createAdminData:H}=Ne(t=>t.admin);p.exports.useEffect(()=>{const c={...{page:m,status:v.value,limit:f,keyword:h}};l&&(c.id=l),Re(c);const C=Le(c);return window.addEventListener("popstate",C),()=>{window.removeEventListener("popstate",C)}},[m,f,h,v,h,l]),p.exports.useEffect(()=>{if(P||I||Y||H){o(B);let t={page:m,status:v.value,limit:f,keyword:h};o(D(t))}},[P,I,Y,H]),p.exports.useEffect(()=>{x&&($(x==null?void 0:x.admins),K(x==null?void 0:x.totalAdmins))},[x]),p.exports.useEffect(()=>{let t,c={page:m,status:v.value,limit:f,keyword:h};return h?t=setTimeout(()=>{o(D(c))},3e3):t=setTimeout(()=>{o(D(c))},100),n&&(t=setTimeout(()=>{o(D(c))},1e3)),()=>{clearTimeout(t)}},[o,m,f,h,v,h]),p.exports.useEffect(()=>{O(1)},[v]);const ee=[{value:"",label:"All",number:0},{value:"active",label:"Active",number:1},{value:"deactivated",label:"Deactivated",number:2},{value:"deleted",label:"Deleted",number:3}],te=t=>{O(t.selected+1)},se=t=>{const c=parseInt(t.currentTarget.value);F(c)},ae=t=>{S(t)},ne=()=>{const t=Number(Math.ceil(X/f));return e(Oe,{previousLabel:"",nextLabel:"",pageCount:t||1,activeClassName:"active",forcePage:m!==0?m-1:0,onPageChange:c=>te(c),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},le=()=>{const t={status:v.value,limit:f,q:h},c=Object.keys(t).some(function(C){var N;return((N=t[C])==null?void 0:N.length)>0});return(n==null?void 0:n.length)>0&&!c?n:(n==null?void 0:n.length)===0&&c?[]:n==null?void 0:n.slice(0,f)},re=(t,c)=>{g(c),i(t.sortField)},ie=t=>{!t||(t.value!==""&&t.label?M({label:t.label,value:t.value}):M({label:t.label,value:t.value}))},oe=[{name:"Full Name",sortable:!0,minWidth:"300px",sortField:"fullName",selector:t=>t.firstName+t.lastName,cell:t=>r("div",{className:"d-flex justify-content-left align-items-center",children:[qe(t),r("div",{className:"d-flex flex-column",children:[e("div",{className:"user_name text-truncate text-body",children:r("span",{className:"fw-bolder text-capitalize",children:[t.firstName," ",t.lastName]})}),e("small",{className:"text-truncate text-muted mb-0",children:t.email})]})]})},{name:"Status",minWidth:"135px",sortable:!0,sortField:"adminStatus",selector:t=>t.status,cell:t=>e(Ce,{className:"text-capitalize d-flex flex-column",color:Qe[t.status],pill:!0,children:e("span",{className:"text-capitalize",children:t.status})})},{name:"Role",sortable:!0,minWidth:"130px",sortField:"role",selector:t=>t.role,cell:t=>e("span",{className:"text-capitalize",children:t.role})},{name:"Created At",minWidth:"140px",sortable:!0,sortField:"createdAt",selector:t=>t.createdAt,cell:t=>r("div",{className:"text-capitalize d-flex flex-column",children:[e("span",{children:_(t.createdAt).format("MM/DD/YY")}),e("smal",{children:_(t.createdAt).format("hh:mm A")})]})},{name:"Actions",minWidth:"100px",cell:t=>e("div",{className:"column-action",children:r(ye,{children:[e(we,{tag:"div",className:"btn btn-sm",children:e(Ve,{size:14,className:"cursor-pointer"})}),r(Se,{children:[e(ce,{toggleSidebar:s,row:t}),e(de,{row:t}),e(me,{row:t})]})]})})}],ce=({row:t,toggleSidebar:c})=>{const C=T();return r(R,{tag:"button",className:"w-100",onClick:()=>{d(!u);debugger;a(t.id),C(B),c(t)},children:[e(Ie,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Update"})]})},me=({row:t})=>{const c=T();return r(R,{tag:"button",className:"w-100",onClick:async()=>(c(B),await y.fire({title:"Are you sure?",text:"You will be deleting admin!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete admin!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(N){N.value?(y.fire({icon:"success",title:"Deleted!",text:"Admin has been Deleted.",customClass:{confirmButton:"btn btn-success"}}),c(Ae(t.id))):N.dismiss===y.DismissReason.cancel&&y.fire({title:"Cancelled",text:"Cancelled Delete :)",icon:"error",customClass:{confirmButton:"btn btn-success"}})})),children:[e(Te,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Delete"})]})},de=({row:t})=>{const c=T();return r(R,{tag:"button",className:"w-100",onClick:async()=>{let N=t.status==="active"?"deactivate":"active";return c(B),await y.fire({title:"Are you sure?",text:`You will ${N} admin!`,icon:"warning",showCancelButton:!0,confirmButtonText:`Yes, ${N} admin!`,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(q){if(q.value){y.fire({icon:"success",title:`${N}d!`,text:`Admin has been ${N}d.`,customClass:{confirmButton:"btn btn-success"}});let E=null;N==="deactivate"?E="deactivated":E="active";let ue={id:t.id,status:E};c(ke(ue))}else q.dismiss===y.DismissReason.cancel&&y.fire({title:"Cancelled",text:"Cancelled De-activating :)",icon:"error",customClass:{confirmButton:"btn btn-success"}})})},children:[e(We,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:t.status==="active"?"Deactivate":"Activate"})]})};return r(p.exports.Fragment,{children:[r(Q,{children:[e(be,{children:e(ge,{tag:"h4",children:"Filters"})}),e(ve,{children:e(G,{children:r(V,{md:"4",children:[e(k,{for:"status-select",children:"Admin Status"}),e(ze,{theme:xe,isClearable:!1,className:"react-select",classNamePrefix:"select",options:ee,value:v||"",onChange:ie})]})})})]}),e(Q,{className:"overflow-hidden",children:e("div",{className:"react-dataTable",children:e(Be,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:oe,onSort:re,sortIcon:e(De,{}),className:"react-dataTable",paginationComponent:ne,data:le(),subHeaderComponent:e(Ue,{searchTerm:h,rowsPerPage:f,handleFilter:ae,handlePerPage:se,toggleSidebar:s})})})})]})},at=()=>{const[s,u]=p.exports.useState(!1),[d,l]=p.exports.useState(!1),[a,o]=p.exports.useState(null),[b,g]=p.exports.useState(""),h=S=>{if(S){debugger;o(S)}u(!s)};return r("div",{className:"app-user-list",children:[e(_e,{toggleSidebar:h,editAdminProfile:d,setEditAdminProfile:l,userID:b,setUserID:g}),e(He,{open:s,toggleSidebar:h,editAdminProfile:d,setEditAdminProfile:l,adminProfileData:a})]})};export{at as default};
